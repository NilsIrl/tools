---
title: "PGP Symmetrical Encryption/Decryption Online"
description: A private (absolutely nothing is sent over the network) PGP symmetrical encryptor/decryptor
---
<form id="form">
    <input type="file" name="file" id="file" required>
    <div>
    <label for="key">Symmetric key: </label>
    <input type="password" id="key" name="key" required>
    </div>
    <div>
        <input type="radio" name="action" value="decrypt" id="decryptChoice" checked>
        <label for="decryptChoice">Decrypt</label>
    </div>
    <div>
        <input type="radio" name="action" value="encrypt" id="encryptChoice">
        <label for="encryptChoice">Encrypt</label>
    </div>
    <input type="submit">
</form>
<script type="module">
    import * as openpgp from 'https://unpkg.com/openpgp@5.0.0-6/dist/openpgp.min.mjs';
    let form = document.getElementById("form");
    form.addEventListener('submit', event => {
        event.preventDefault();
        let password = document.getElementById("key").value;
        let reader = new FileReader();
        let decryptChoice = document.getElementById("decryptChoice").checked;
        let file = document.getElementById("file").files[0];
        reader.onload = async (e) => {
            const a = document.createElement("a");
            let data;
            let filename;
            if (decryptChoice) {
                const message = await openpgp.readMessage({ armoredMessage: e.target.result });
                const decryptedMessage = await openpgp.decrypt({ message: message, passwords: password, format: "binary" });
                data = decryptedMessage.data;
                filename = decryptedMessage.filename;
            } else {
                const message = await openpgp.createMessage({ text: e.target.result, filename: file.name, date: file.lastModified });
                const encryptedMessage = await openpgp.encrypt({ message: message, passwords: password });
                data = encryptedMessage;
                filename = file.name + ".pgp";
                console.log(encryptedMessage);
            }
            const url = window.URL.createObjectURL(new Blob([data]));
            a.href = url;
            a.style.display = "none";
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            a.remove();
        }
        reader.readAsBinaryString(file);
    });
</script>
